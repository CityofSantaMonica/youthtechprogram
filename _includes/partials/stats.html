{% for stat in site.data.stats %}
    <div class="item {% if forloop.first %}active{% endif %}">
        <div class="row">
            <div class="col-md-4">
                <div id="{{ stat.name }}-chart" class="stat-chart"></div>
            </div>

            <div class="col-md-8 blackboard">
                <h2 class="section-header">{{ stat.title }}</h2>
                <h3>{{ stat.slug }}</h3>

                {% if stat.content %}
                    <article>
                        {{ stat.content | markdownify }}
                    </article>
                {% endif %}
            </div>
        </div>
    </div>
{% endfor %}

<script>
    var barOptions = {

    };
    var pieOptions = {
        height: 200,
        width: 200,
        chartPadding: 30,
        labelOffset: 50,
        labelDirection: "explode"
    };

    {% for stat in site.data.stats %}
        {% capture chartID %}#{{ stat.name }}-chart{% endcapture %}

        {% if stat.type == "pie" %}
            new Chartist.Pie("{{ chartID }}", {{ stat.data | jsonify }}, pieOptions);
        {% elsif stat.type == "bar" %}
            new Chartist.Bar("{{ chartID }}", {{ stat.data | jsonify }}, barOptions);
        {% endif %}
    {% endfor %}


    $('#program-stats').bind('slid.bs.carousel', function (e) {
        $(e.relatedTarget).find(".stat-chart")[0].__chartist__.update()
    });
</script>
