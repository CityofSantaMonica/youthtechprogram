{% for stat in site.data.stats %}
    <div class="item {% if forloop.first %}active{% endif %}">
        <div class="row">
            <div class="col-md-4">
                <div id="{{ stat.name }}-chart" class="stat-chart"></div>
            </div>

            <div class="col-md-8 blackboard">
                <h2 class="section-header">{{ stat.title }}</h2>
                <h3>{{ stat.slug }}</h3>

                {% if stat.content %}
                    <article>
                        {{ stat.content | markdownify }}
                    </article>
                {% endif %}
            </div>
        </div>
    </div>
{% endfor %}

<script>
    var LineOptions = {
        low: 12,
        high: 18,
        fullWidth: true,
        lineSmooth: false,
        chartPadding: {
            right: 40
        },
        axisY: {
            onlyInteger: true,
            offset: 20
        }
    };
    var PieOptions = {
        height: 200,
        width: 200,
        showLabel: false
    };

    // Generate Chartist constructors for each available stat
    {% for stat in site.data.stats %}
        {% capture chartID %}#{{ stat.name }}-chart{% endcapture %}
        {% capture chartType}{{ stat.type | capitalize }}{% endcapture %}

        new Chartist.{{ chartType }}("{{ chartID }}", {{ stat.data | jsonify }}, {{ chartType }}Options);
    {% endfor %}

    // Update Charts on resize (just in case)
    $('#program-stats').bind('slid.bs.carousel', function (e) {
        $(e.relatedTarget).find(".stat-chart")[0].__chartist__.update()
    });
</script>
